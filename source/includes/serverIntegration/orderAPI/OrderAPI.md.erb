## Order API

>step 1 

>user click from shopback and get redirected to merchant site with parameters that set by above submitting.

```shell
"https://www.example.com/?test_ref=shopback&sbid=1024207abb8d1b675f59803211155f"
```

This API is used for order data postback. Once the purchase is done and API get called, ShopBack will receive the data and keep it in system for further validation.

</br></br>

### HTTPS Request Of Order API

`GET https://shopback.go2cloud.org/aff_lsr`

>step 2 

```shell
#item-1
curl -X GET "https://shopback.go2cloud.org/aff_c?offer_id=2118&aff_id=1059
            &adv_sub=A0149&amount=70&transaction_id=10267617e7919a09a12
            &security_token=c2a32524880"
#item-2
curl -X GET "https://shopback.go2cloud.org/aff_c?offer_id=2118&aff_id=1059
            &adv_sub=A0188&amount=130&transaction_id=10267617e7919a09a12
            &security_token=c2a32524880"
```

>call order api when the conversion is made


| Parameter | Description | Type |
| --------- | ----------- | :--: |
| offer_id | Order API ID in ShopBack. | String |
| amount | Amount of the order has been made in NTD. | Float |
| adv_sub | Order ID of the order has been made. | String |
| adv_sub2 (optional) | String that refer to specific tier set in ShopBack.(define by merchant) | String |
| adv_sub3 (optional) | SKU of the order has been made | String |
| adv_sub4 (optional) | conversion_unique_id | String |
| adv_sub5 (optional) |  |  |
| security_token |  | String |
| transaction_id | Hash value for ShopBack to identify each user and give cashback</br>(default to expire after postback) | String |

### Response Of Order API

| String | Description |
| ------ | ----------- |
| sucess=true; | Order has created successfully by API call. |
| success=false;</br>err_msg=Invalid Trans. | ID Transaction_id is in wrong format.|
| success=false;</br>err_msg=Request offer #1234 does not match session offer #2345. | This transaction_id wasnâ€™t distributed by your offer.|
| success=false;</br>err_msg=Duplicate recorded with Trans. ID | This transaction_id has already expired.|

<%= partial "includes/serverIntegration/orderAPI/orderError.md" %>